---
weight: 10
title: 요청 인증
---
<h1>요청 인증</h1>
<p>REST API를 요청(Request)할 때 HTTP 헤더에 Authorization 정보를 추가하여 인증 받을 수 있습니다. API를 요청한 계정의 소유자를 확인하는데 필수적인 절차입니다.</p>
<p><em>참고</em></p>
<p>Authorization 헤더정보를 전달하는 방식은 HTTP에서 인증을 위한 수단으로 널리 사용되고 있습니다.  <code>Basic access authentication &lt;https://en.wikipedia.org/wiki/Basic_access_authentication&gt;</code>_ 을 참고하세요.</p>
<p>쿨에스엠에스 <code>API Key 관리 &lt;https://www.coolsms.co.kr/index.php?mid=service_setup&amp;act=dispSmsconfigCredentials&gt;</code>_ 페이지에서 API Key와 API Secret을 생성하여 REST API 호출에 사용합니다.</p>
<p><img src="/images/credential_info.png" alt="Credential Information"></p>
<p>{{% syntaxParser %}}</p>
<blockquote>
<p>Request Syntax</p>
</blockquote>
<pre><code class="language-json">
{
  Authorization: &lt;AuthenticationMethod&gt; apiKey=&lt;ApiKey&gt;,
  date=&lt;DateTime&gt;, 
  salt=&lt;Salt&gt;, 
  signature=&lt;Signature&gt;
}

</code></pre>
<dl>
<dt>{{% /syntaxParser %}}</dt>
<dd>
<dl>
<dt>AuthenticationMethod</dt>
<dd>Signature 생성 알고리즘으로 HMAC-SHA256, HMAC-MD5 중에 하나를 선택할 수 있습니다.</dd>
</dl>
</dd>
<dd>
<dl>
<dt>ApiKey</dt>
<dd>발급받은 API Key를 입력합니다.</dd>
</dl>
</dd>
<dd>
<dl>
<dt>DateTime</dt>
<dd>ISO 8601 규격의 날짜와 시간을 입력합니다.</dd>
</dl>
</dd>
<dd>
<dl>
<dt>Salt</dt>
<dd>10 ~ 64바이트의 불규칙적이고 랜덤한 문자열을 생성하여 사용합니다.</dd>
</dl>
</dd>
<dd>
<dl>
<dt>Signature</dt>
<dd>DateTime와 Salt을 하나로 연결한 문자열을 데이터로 하고 API Secret을 Key로 만들어진 HMAC 해시코드</dd>
</dl>
</dd>
</dl>
<p>Signature의 재사용을 막기위해서 입력된 DateTime이 표준시간을 기준으로 ±15분 차이가 날 경우 RequestTimeTooSkewed 오류를 리턴합니다. 또한 15분 내에 한번 사용된 Signature는 중복사용이 불가능하므로 원천적으로 재사용을 차단하고 있습니다.</p>
<dl>
<dt><em><strong>참고</strong></em></dt>
<dd>날짜와 시간을 표현하는데 있어서 시차와 표기법이 틀릴 수 있으므로 혼돈이 없도록 국제규격 ISO 8601을 따릅니다. <a href="https://ko.wikipedia.org/wiki/ISO_8601">ISO 8601</a> 을 참고하세요.</dd>
</dl>
<h2>Signature 생성</h2>
<p>클라이언트에서 DateTime + Salt 를 데이터로, API Secret을 Key로 사용하여 HMAC(Hash-based Message Authentication Code)을 만들어진 Signature를 서버로 보내면, 서버 쪽에서도 동일한 방식으로 만들어 비교하게 됩니다. API Secret은 Signature를 생성할 때만 사용하고 외부에 노출되지 않도록 주의해야 합니다.</p>
<dl>
<dt><em><strong>참고</strong></em></dt>
<dd>메시지의 무결성 검증(인증)을 위한 용도로 Signature 생성 및 검증에 Hash기반의 MAC 알고리즘을 사용하고 있습니다. <a href="https://en.wikipedia.org/wiki/Hash-based_message_authentication_code">Hash-based message authentication code</a> 을 참고하세요.</dd>
</dl>
<p>Signature는 중복사용이 불가하며 15분 안에 전송되는 요청(Request)의 Signature 값은 항상 달라야 합니다. 그래서 Salt는 매번 요청때마다 다른 문자열로 변경하여 요청 시간대가 같아도 항상 Signature가 다른 값으로 생성되도록 합니다.</p>
<blockquote>
<p>Request Sample</p>
</blockquote>
<pre><code class="language-bash">$ curl -X POST https://solapi.com/MessageLog/3/getSentMessages \
    --header &quot;Authorization : HMAC-SHA256 ApiKey=[API_KEY], Date=[ISO 8601 DATE], Salt=[UNIQID], Signature=[SIGNATURE]&quot;
</code></pre>
<pre><code class="language-javascript">request(
  {
    url: &quot;https://solapi.com/MessageLog/3/getSentMessages&quot;,
    method: 'post',
    headers: {
      'Authorization': `HMAC-SHA256 ApiKey=[API_KEY], Date=[DATE], Salt=[SALT], Signature=[SIGNATURE]`
    },
    json: {}
  }
)
</code></pre>
<pre><code class="language-python">conn = HTTPSConnection('solapi.com', '443')
conn.request(&quot;POST&quot;,&quot;/MessageLog/3/getSentMessages&quot;, &quot;&quot;, {&quot;Authorization&quot;:&quot;HMAC-SHA256 ApiKey=[API_KEY], Date=[DATE], Salt=[SALT], Signature=[SIGNATURE]&quot;} )
conn.close()
</code></pre>
<pre><code class="language-php">&lt;?php
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,&quot;https://solapi.com/MessageLog/3/getSentMessages&quot;); //requset URL
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Authorization: HMAC-SHA256 ApiKey=[API_KEY], Date=[DATA], Salt=[SALT], Signature=[SIGNATURE])');
curl_exec($ch);
curl_close($ch);
?&gt;
</code></pre>
<h2>Errors</h2>
<dl>
<dt>아래의 오류가 발생할 수 있습니다.</dt>
<dd>
<dl>
<dt><strong>InvalidAPIKey</strong></dt>
<dd>유효한 API Key가 아님</dd>
<dd>HTTP Status Code: 403</dd>
</dl>
</dd>
<dd>
<dl>
<dt><strong>SignatureDoesNotMatch</strong></dt>
<dd>생성한 Signature가 일치하지 않음</dd>
<dd>HTTP Status Code: 403</dd>
</dl>
</dd>
<dd>
<dl>
<dt><strong>RequestTimeTooSkewed</strong></dt>
<dd>시간 값이 서버 시간을 15분 이상 벗어남</dd>
<dd>HTTP Status Code: 403</dd>
</dl>
</dd>
<dd>
<dl>
<dt><strong>DuplicatedSignature</strong></dt>
<dd>15분 안에 동일한 signature 값</dd>
<dd>HTTP Status Code: 403</dd>
</dl>
</dd>
</dl>
<p>공통적으로 일어날 수 있는 오류 코드를 확인하시려면 오류코드를 참고하세요.</p>
