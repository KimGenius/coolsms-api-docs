{"version":3,"sources":["../../src/helpers/gitinfo.js"],"names":["helper","_","require","createGitinfo","compile","config","context","parserConfig","gitdown","getConfig","gitinfo","gitPath","methodMap","branch","name","url","username","Error","isFunction","weight","module","exports"],"mappings":";;AAAA,MAAMA,SAAS,EAAf;AACA,MAAMC,IAAIC,QAAQ,QAAR,CAAV;AACA,MAAMC,gBAAgBD,QAAQ,SAAR,CAAtB;;AAEAF,OAAOI,OAAP,GAAiB,CAACC,MAAD,EAASC,OAAT,KAAqB;AACpC,QAAMC,eAAeD,QAAQE,OAAR,CAAgBC,SAAhB,GAA4BC,OAAjD;AACA,QAAMA,UAAUP,cAAc;AAC5BQ,aAASJ,aAAaI;AADM,GAAd,CAAhB;;AAIA,QAAMC,YAAY;AAChBC,YAAQ,eADQ;AAEhBC,UAAM,SAFU;AAGhBC,SAAK,cAHW;AAIhBC,cAAU;AAJM,GAAlB;;AAOA,MAAI,CAACX,OAAOS,IAAZ,EAAkB;AAChB,UAAM,IAAIG,KAAJ,CAAU,+BAAV,CAAN;AACD;;AAED,MAAI,CAACL,UAAUP,OAAOS,IAAjB,CAAL,EAA6B;AAC3B,UAAM,IAAIG,KAAJ,CAAU,oCAAoCZ,OAAOS,IAA3C,GAAkD,KAA5D,CAAN;AACD;;AAED,MAAI,CAACb,EAAEiB,UAAF,CAAaR,QAAQE,UAAUP,OAAOS,IAAjB,CAAR,CAAb,CAAL,EAAoD;AAClD,UAAM,IAAIG,KAAJ,CAAU,+CAA+CZ,OAAOS,IAAtD,GAA6D,IAAvE,CAAN;AACD;;AAED,SAAOJ,QAAQE,UAAUP,OAAOS,IAAjB,CAAR,GAAP;AACD,CA1BD;;AA4BAd,OAAOmB,MAAP,GAAgB,EAAhB;;AAEAC,OAAOC,OAAP,GAAiBrB,MAAjB","file":"gitinfo.js","sourcesContent":["const helper = {};\nconst _ = require('lodash');\nconst createGitinfo = require('gitinfo');\n\nhelper.compile = (config, context) => {\n  const parserConfig = context.gitdown.getConfig().gitinfo;\n  const gitinfo = createGitinfo({\n    gitPath: parserConfig.gitPath\n  });\n\n  const methodMap = {\n    branch: 'getBranchName',\n    name: 'getName',\n    url: 'getGithubUrl',\n    username: 'getUsername'\n  };\n\n  if (!config.name) {\n    throw new Error('config.name must be provided.');\n  }\n\n  if (!methodMap[config.name]) {\n    throw new Error('Unexpected config.name value (\"' + config.name + '\").');\n  }\n\n  if (!_.isFunction(gitinfo[methodMap[config.name]])) {\n    throw new Error('Gitinfo module does not provide function \"' + config.name + '\".');\n  }\n\n  return gitinfo[methodMap[config.name]]();\n};\n\nhelper.weight = 10;\n\nmodule.exports = helper;\n"]}